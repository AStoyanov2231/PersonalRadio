document.querySelectorAll('.play-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const stationId = btn.closest('.station-card').dataset.stationId;
        const station = this.stations.find(s => s.stationuuid === stationId);
        
        // If this is the currently playing station, toggle play/pause
        if (this.currentStation && this.currentStation.stationuuid === stationId) {
            this.togglePlayPause();
        } else {
            // Otherwise, play the selected station
            this.playStation(station);
        }
    });
});

document.querySelectorAll('#favorites-grid .play-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const stationId = btn.closest('.station-card').dataset.stationId;
        const station = this.favorites.find(s => s.stationuuid === stationId);
        
        // If this is the currently playing station, toggle play/pause
        if (this.currentStation && this.currentStation.stationuuid === stationId) {
            this.togglePlayPause();
        } else {
            // Otherwise, play the selected station
            this.playStation(station);
        }
    });
});

addStationCardListeners() {
    document.querySelectorAll('#favorites-grid .station-card').forEach(card => {
        card.addEventListener('click', (e) => {
            if (!e.target.closest('.station-actions')) {
                const stationId = card.dataset.stationId;
                const station = this.favorites.find(s => s.stationuuid === stationId);
                this.playStation(station);
            }
        });
    });

    document.querySelectorAll('#favorites-grid .play-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const stationId = btn.closest('.station-card').dataset.stationId;
            const station = this.favorites.find(s => s.stationuuid === stationId);
            
            // If this is the currently playing station, toggle play/pause
            if (this.currentStation && this.currentStation.stationuuid === stationId) {
                this.togglePlayPause();
            } else {
                // Otherwise, play the selected station
                this.playStation(station);
            }
        });
    });
}

addMusicCardListeners() {
    document.querySelectorAll('#my-music-grid .station-card').forEach(card => {
        card.addEventListener('click', (e) => {
            if (!e.target.closest('.station-actions')) {
                const songId = card.dataset.songId;
                const song = this.myMusic.find(s => s.id === songId);
                this.playLocalMusic(song);
            }
        });
    });

    document.querySelectorAll('#my-music-grid .play-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const songId = btn.closest('.station-card').dataset.songId;
            const song = this.myMusic.find(s => s.id === songId);
            
            // If this is the currently playing song, toggle play/pause
            if (this.currentStation && this.currentStation.id === songId) {
                this.togglePlayPause();
            } else {
                // Otherwise, play the selected song
                this.playLocalMusic(song);
            }
        });
    });

    document.querySelectorAll('#my-music-grid .delete-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const songId = btn.closest('.station-card').dataset.songId;
            this.deleteLocalMusic(songId);
        });
    });
}